<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h4>Set New Password</h4>
        </div>
        <div class="card-body">
          <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" *ngIf="!success">
            <div class="form-group mb-3">
              <label for="newPassword">New Password</label>
              <input type="password" class="form-control" id="newPassword"
                     formControlName="newPassword" required>
            </div>
            <div class="form-group mb-3">
              <label for="confirmPassword">Confirm Password</label>
              <input type="password" class="form-control" id="confirmPassword"
                     formControlName="confirmPassword" required>
              <div *ngIf="resetForm.hasError('mismatch')" class="text-danger mt-1">
                Passwords do not match
              </div>
            </div>
            <button type="submit" class="btn btn-primary"
                    [disabled]="resetForm.invalid || loading">
              <span *ngIf="!loading">Reset Password</span>
              <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
            </button>
          </form>

          <div *ngIf="success" class="text-center">
            <div class="alert alert-success">
              <h5>Password changed successfully!</h5>
              <p>You can now close this tab or return to the home page.</p>
            </div>
            <button class="btn btn-primary" (click)="goToHome()">
              Go to Home Page
            </button>
          </div>

          <app-message
            [successMessage]="successMessage"
            [errorMessage]="errorMessage">
          </app-message>
        </div>
      </div>
    </div>
  </div>
</div>
